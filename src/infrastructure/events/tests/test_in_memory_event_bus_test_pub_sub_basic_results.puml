@startuml
title Sequence Diagram: test_pub_sub_basic
autonumber
skinparam responseMessageBelowArrow true
"Test" -> "InMemoryEventBus" : **CREATE** Initialize fresh bus
"Test" -> "InMemoryEventBus" : **SUBSCRIBE** Subscribe handler
note right
Data: {
  "event": "test_event"
}
end note
"Test" -> "InMemoryEventBus" : **PUBLISH** Publish event
note right
Data: {
  "event": "test_event",
  "data": 42
}
end note
"Handler" -> "Test" : **RECEIVE** Handler called
note right
Data: {
  "data": 42
}
end note
"Test" -> "InMemoryEventBus" : **ASSERT** Verify calls
note right
Expect: [42]
Got: [42]
end note
@enduml